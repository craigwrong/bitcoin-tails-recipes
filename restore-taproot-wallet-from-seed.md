# Generating and Restoring Descriptor Wallets

## Taproot with Mnemonic

Start from a WIF seed generated by Bitcoin Core:

    bx wif-to-ec <SEED> | bx mnemonic-new | bx mnemonic-to-seed | bx hd-new

In Bitcoin console use the extended private key to obtain the descriptor checksum.

    getdescriptorinfo "tr(xprv.../86h/0h/0h/0/*)"

Repeat for the internal wallet descriptor (change).

    getdescriptorinfo "tr(xprv.../86h/0h/0h/1/*)"

Import descriptors into Core.

    importdescriptors '[{ "desc": "tr(xprv.../86h/0h/0h/0/*)#<CHECKSUM>", "timestamp": "now", "active": true, "label": "Savings" }, { "desc": "tr(xprv.../86h/0h/0h/1/*)#<CHECKSUM_2>", "timestamp": "now", "active": true, "internal": true }]'

# Native SegWit with Mnemonic

Bitcoin Explorer for master XPriv:

    bx mnemonic-to-seed MNEMONIC_1 MNEMONIC_2... | bx hd-new
    getdescriptorinfo "wpkh(xprv.../84h/0h/0h/0/*)"
    getdescriptorinfo "wpkh(xprv.../84h/0h/0h/1/*)"
    importdescriptors '[{ "desc": "wpkh(xprv.../84h/0h/0h/0/*)#<CHECKSUM>", "timestamp": "now", "active": true, "label": "Spending" },{ "desc": "wpkh(xprv.../84h/0h/0h/1/*)#<CHECKSUM_2>", "timestamp": "now", "active": true, "internal": true ]'

# Legacy Bitcoin Core BIP 32 Wallet

Start with a WIF seed from a legacy wallet dump using derivation paths: m/0'/0'/i' m/0'/1'/i'.

Using Bitcoin Explorer (bx) to derive the private key controlling the first address:

bx wif-to-ec <SEED> | bx hd-new

Find the checksums.

getdescriptorinfo "wpkh(xprv.../0h/0h/*h)"
getdescriptorinfo "wpkh(xprv.../0h/1h/*h)"

bitcoin-cli importdescriptors '[{ "desc": "wpkh(xprv.../0h/0h/*h)#<CHECKSUM>", "timestamp": "now", "active": true, "label": "Legacy" },{ "desc": "wpkh(xprv.../0h/1h/*h)#<CHECKSUM_2>", "timestamp": "now", "active": true, "internal": true }]'

To derive the specific private key for the first address, as shown on a legacy wallet dump:

bx hd-private -d -i 0 <XPRIV> | bx hd-private -d -i 0 | bx hd-private -d -i 0 | bx hd-to-ec | bx ec-to-wif

